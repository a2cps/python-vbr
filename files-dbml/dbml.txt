Project project_name {
  database_type: 'pgrest'
  Note: 'Virtual Biospecimen Repository'
}

Table unit {
  description varchar(255) 
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  name varchar(255) [unique]
  unit_id int [primary key, increment]
  Note: 'Physical unit for measurements'
}
Table status {
  description varchar(255) 
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  name varchar(255) [unique]
  status_id int [primary key, increment]
  Note: 'TACC-defined table; status_id mirrors the REDCap 0 (incomplete), 1 (partial), and 2 (complete) status with extensibility for additional status definitions.'
}
Table reason {
  description varchar(255) 
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  name varchar(255) [unique]
  reason_id int [primary key, increment]
  Note: 'TACC-defined table of reasons for incomplete status to aid analysis of participant dropouts, biosample QA, logistics, and other issues.'
}
Table protocol {
  description varchar(255) [not null]
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  name varchar(255) 
  protocol_id int [primary key, increment]
  tracking_id varchar(255) [not null]
  Note: 'C2M2 proposed future extension: an event-type or defined process.'
}
Table project {
  abbreviation varchar(255) [not null]
  creation_time timestamp [not null, default: 'now()']
  description varchar(255) [not null]
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  name varchar(255) [unique]
  project_id int [primary key, increment]
  tracking_id varchar(255) [not null]
  Note: 'C2M2-defined table uniquely defining projects within the scope of the VBR and broader NIH namespace.'
}
Table organization {
  description varchar(255) [not null]
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  name varchar(255) 
  organization_id int [primary key, increment]
  url varchar(255) [unique]
  Note: 'C2M2 proposed future extension: a list of data-generating research programs or entities.'
}
Table measurement_type {
  description varchar(255) [not null, note: 'Descriptive name']
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  measurement_type_id int [primary key, increment]
  name varchar(255) [unique, note: 'Short label (ex. plasma or paxgene']
  Note: 'Definitions for types of measurement'
}
Table location {
  address1 varchar(255) [not null]
  address2 varchar(255) [not null]
  address3 varchar(255) [not null]
  city varchar(255) [not null]
  display_name varchar(255) [unique]
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  location_id int [primary key, increment]
  organization int [not null, ref: > organization.organization_id]
  state_province_country varchar(255) [not null]
  zip_or_postcode varchar(255) [not null]
  Note: 'TACC-defined table: contains physical address information for shipping.'
}
Table container_type {
  container_type_id int [primary key, increment]
  description varchar(255) [not null, note: 'Descriptive name']
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  name varchar(255) [unique, note: 'Short label (ex. aliquot or paxgene']
  Note: 'Definitions for storage, shipping, and other containers'
}
Table container {
  container_id int [primary key, increment]
  container_type int [not null, default: 0, ref: > container_type.container_type_id]
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  location int [not null, default: 0, ref: > location.location_id]
  parent_container int [not null, note: 'Parent container_id. Permits nesting relationships.', default: 0]
  status int [default: 10, ref: > status.status_id]
  tracking_id varchar(255) [not null, unique, note: 'Tracking ID assigned to container']
  Note: 'TACC defined extension: a generic container class'
}
Table contact {
  contact_id int [primary key, increment]
  email varchar(255) [unique, note: 'Email address for notifications']
  first_name varchar(255) [note: 'First name']
  last_name varchar(255) [note: 'Last name']
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  organization int [note: 'Organization ID', ref: > organization.organization_id]
  phone varchar(255) [not null, note: 'Phone number for notifications (optional)']
  Note: 'TACC-defined table: contains administrative contact information'
}
Table anatomy {
  anatomy_id int [primary key, increment]
  description varchar(255) [not null, note: 'Description of this anatomy object']
  id varchar(255) [note: 'UBERON CV term used to locate the origin of a biosample within the physiology of its source.']
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  name varchar(255) [not null, note: 'Short name for this anatomy object']
  Note: 'C2M2-defined table: id is an UBERON CV term locating the origin of a biosample within the physiology of its subject.'
}
Table subject {
  creation_time timestamp [not null, default: 'now()']
  granularity varchar(255) [not null, default: 'cfde_subject_granularity:0']
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  project int [ref: > project.project_id]
  source_subject_id varchar(255) [note: 'REDCap record_id or EHRR case reference']
  subject_id int [primary key, increment]
  tracking_id varchar(255) [unique, note: 'GUID assigned to subject']
  Note: 'The source organism(s) from which a biosample has been generated.'
}
Table shipment {
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  name varchar(255) [not null, note: 'Free text name of shipment']
  project int [ref: > project.project_id]
  sender_name varchar(255) [not null, note: 'Free text name of sender']
  ship_from int [not null, ref: > location.location_id]
  ship_to int [not null, ref: > location.location_id]
  shipment_id int [primary key, increment]
  source_record_id varchar(255) [not null, note: 'REDCap record_id for shipment']
  status int [ref: > status.status_id]
  tracking_id varchar(255) [unique, note: 'Fedex or UPS shipment tracking barcode']
  Note: 'Provides details for shipping biosamples'
}
Table data_event {
  comment varchar(255) [not null]
  data_event_id int [primary key, increment]
  event_ts timestamp [not null, default: 'now()']
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  performed_by int [not null, ref: > contact.contact_id]
  protocol int [not null, ref: > protocol.protocol_id]
  rank int [not null]
  reason int [not null, ref: > reason.reason_id]
  status int [not null, ref: > status.status_id]
  Note: 'C2M2 proposed future extension: logs data events with associated status, issues and comments.'
}
Table container_in_shipment {
  container int [unique, ref: > container.container_id]
  container_in_shipment_id int [primary key, increment]
  shipment int [ref: > shipment.shipment_id]
  Note: 'Maps containers inside other shipments.'
}
Table biosample {
  anatomy int [ref: > anatomy.anatomy_id]
  biosample_id int [primary key, increment]
  creation_time date 
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  project int [ref: > project.project_id]
  protocol int [ref: > protocol.protocol_id]
  subject int [ref: > subject.subject_id]
  tracking_id varchar(255) [unique, note: 'ID assigned to sample when collected']
  Note: 'C2M2-defined table: each record uniquely identifies a biosample obtained from a subject'
}
Table measurement {
  biosample int [ref: > biosample.biosample_id]
  container int [not null, ref: > container.container_id]
  creation_time timestamp [not null, default: 'now()']
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  measurement_id int [primary key, increment]
  measurement_type int [ref: > measurement_type.measurement_type_id]
  project int [ref: > project.project_id]
  status int [ref: > status.status_id]
  tracking_id varchar(255) [note: 'Identifier assigned to measurement at creation']
  unit int [ref: > unit.unit_id]
  Note: 'TACC-defined extension: contains sub-divisions of a biosample.'
}
Table data_event_in_subject {
  data_event int [ref: > data_event.data_event_id]
  data_event_in_subject_id int [primary key, increment]
  subject int [ref: > subject.subject_id]
  Note: 'Maps data_events associated with each subject.'
}
Table data_event_in_shipment {
  data_event int [ref: > data_event.data_event_id]
  data_event_in_shipment_id int [primary key, increment]
  shipment int [ref: > shipment.shipment_id]
  Note: 'Maps data_events associated with shipments.'
}
Table data_event_in_measurement {
  data_event int [ref: > data_event.data_event_id]
  data_event_in_measurement_id int [primary key, increment]
  measurement int [ref: > measurement.measurement_id]
  Note: 'Maps data_events associated with measurements.'
}
Table data_event_in_biosample {
  biosample int [ref: > biosample.biosample_id]
  data_event int [ref: > data_event.data_event_id]
  data_event_in_biosample_id int [primary key, increment]
  Note: 'Maps data_events to biosamples.'
}
Table rcap_consented_participant_information {
  biosample_id int [not null, ref: > biosample.biosample_id]
  consented_participant_information_complete int [ref: > status.status_id]
  consented_participant_information_id int [primary key, increment]
  contact_method int [not null]
  creation_time timestamp [not null, default: 'now()']
  downtime202108 boolean [not null]
  first_name varchar(255) [not null]
  guid varchar(255) [not null]
  home_phone_number varchar(255) [not null]
  last_name varchar(255) [not null]
  last_updated_ts timestamp [not null, default: 'now()']
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  maintcomp202108 boolean [not null]
  measurement_id int [not null, ref: > measurement.measurement_id]
  mobile_phone_number varchar(255) [not null]
  patient_email varchar(255) [not null]
  protocol_id int [note: 'VBR protocol', ref: > protocol.protocol_id]
  record_id varchar(255) [not null]
  screening_id varchar(255) [not null]
  status_id int [note: 'VBR status', ref: > status.status_id]
  subject_id int [not null, ref: > subject.subject_id]
  Note: 'Consented Participant Information'
}
Table rcap_blood_sample_collection_and_processing_crf {
  biosample_id int [not null, ref: > biosample.biosample_id]
  blood_sample_collection_and_processing_crf_complete int [ref: > status.status_id]
  blood_sample_collection_and_processing_crf_id int [primary key, increment]
  bscp_aliq_cnt int [not null]
  bscp_aliquot_box_brcd varchar(255) [not null]
  bscp_aliquot_freezer_time varchar(255) [not null]
  bscp_any_vacc boolean [not null]
  bscp_buffycoat_brcd varchar(255) [not null]
  bscp_buffycoat_na boolean [not null]
  bscp_caff_cups_amt int [not null]
  bscp_comments varchar(1024) [not null]
  bscp_deg_of_hemolysis varchar(32) [not null]
  bscp_hrs_since_cafstim varchar(255) [not null]
  bscp_hrs_since_food varchar(255) [not null]
  bscp_hrs_since_water varchar(255) [not null]
  bscp_lav1_brcd varchar(255) [not null]
  bscp_lav1_centrif_brcd varchar(255) [not null]
  bscp_lav1_not_obt boolean [not null]
  bscp_no_sample_reason int [not null]
  bscp_paxg_aliq_brcd varchar(255) [not null]
  bscp_paxg_aliq_na boolean [not null]
  bscp_paxg_box_brcd varchar(255) [not null]
  bscp_paxg_brcd varchar(255) [not null]
  bscp_paxg_not_obt boolean [not null]
  bscp_phleb_by_init varchar(255) [not null]
  bscp_plasma_brcd varchar(255) [not null]
  bscp_plugcap_centrif_brcd varchar(255) [not null]
  bscp_procby_initials varchar(255) [not null]
  bscp_protocol_dev boolean [not null]
  bscp_protocol_dev_reason int [not null]
  bscp_ra_initials varchar(255) [not null]
  bscp_sample_obtained boolean [not null]
  bscp_samplekit_brcd varchar(255) [not null]
  bscp_time_blood_draw varchar(255) [not null]
  bscp_time_centrifuge varchar(255) [not null]
  bscp_verify_pt boolean [not null]
  creation_time timestamp [not null, default: 'now()']
  last_updated_ts timestamp [not null, default: 'now()']
  local_id varchar(16) [unique, note: 'HashId generated by python-vbr']
  measurement_id int [not null, ref: > measurement.measurement_id]
  protocol_id int [note: 'VBR protocol', ref: > protocol.protocol_id]
  record_id varchar(255) [note: 'REDCap record_id identifying subject']
  status_id int [note: 'VBR status', ref: > status.status_id]
  subject_id int [not null, ref: > subject.subject_id]
  Note: 'Blood Sample Collection And Processing Crf'
}
Table measurement_from_measurement {
  measurement int [unique, ref: > measurement.measurement_id]
  measurement_from_measurement_id int [primary key, increment]
  source_measurement int [ref: > container.container_id]
  Note: 'Maps measurements derived from another measurement.'
}
